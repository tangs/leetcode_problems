#include <vector>
#include <algorithm>
#include "utils/utils.h"

class Solution {
public:
    long long maxTaxiEarnings(int n, std::vector<std::vector<int>>& rides) {

        std::sort(rides.begin(), rides.end(),
            [] (const auto& left, const auto& right) {
                return left[1] < right[1];
            });

        std::vector<int64_t> dp(n + 1);
        int index = 0;
        const auto rides_count = rides.size();

        for (int i = 1; i <= n; ++i) {
            while (index < rides_count && rides[index][1] == i) {
                const auto& ride = rides[index++];
                const int from = ride[0];
                const int to = ride[1];
                const int val = to - from + ride[2];
                dp[i] = std::max(dp[i], dp[from] + val);
            }
            dp[i] = std::max(dp[i], dp[i - 1]);
        }

        return dp[n];
    }
};

int main() {
    std::vector<std::vector<int>> rides0 = {{2,5,4},{1,5,1}};
    std::vector<std::vector<int>> rides1 = Utils::v2<int>("[[1,6,1],[3,10,2],[10,12,3],[11,12,2],[12,15,2],[13,18,1]]");
    std::vector<std::vector<int>> rides2 = Utils::v2<int>("[[1422,1581,555],[718,1792,453],[94,238,934],[185,1985,694],[532,1134,666],[1317,1861,944],[1368,1981,144],[297,439,400],[1947,2000,869],[466,518,788],[620,1836,308],[260,1700,365],[447,855,744],[734,955,752],[1451,1864,618],[1122,1767,386],[422,819,406],[222,1085,919],[260,1288,334],[480,1854,640],[1314,1431,427],[1372,1931,914],[144,1396,616],[657,1925,351],[347,1545,49],[829,1633,431],[898,1297,37],[374,1608,124],[681,958,457],[152,1448,999],[460,1095,778],[1402,1932,266],[997,1628,889],[1577,1867,521],[1031,1769,477],[233,344,418],[1688,1706,810],[445,1710,542],[1953,1991,681],[1298,1474,449],[671,1191,584],[784,878,655],[661,1545,941],[395,1473,107],[164,814,490],[1457,1990,711],[1246,1775,538],[1509,1870,411],[1695,1783,69],[995,1864,5],[1007,1131,167],[330,1196,163],[1549,1948,310],[605,1277,106],[1768,1896,917],[1047,1700,462],[879,1359,435],[1790,1900,212],[192,1104,920],[1918,1989,201],[1090,1968,248],[1505,1630,585],[1923,1939,467],[544,705,489],[1107,1108,596],[342,1177,979],[153,1332,267],[1129,1566,491],[231,1774,757],[1764,1791,970],[1480,1869,791],[830,1740,74],[1399,1733,7],[1602,1746,304],[641,1054,452],[251,426,406],[642,1797,318],[1443,1804,307],[656,857,772],[1422,1673,770],[1895,1928,729],[263,465,999],[1927,1964,410],[563,1964,164],[1090,1268,463],[1124,1983,105],[1665,1867,441],[672,1178,763],[1006,1805,827],[293,625,580],[1676,1929,634],[1788,1855,796],[18,263,126],[1429,1776,196],[1426,1589,134],[1413,1861,583],[1719,1734,78],[799,1657,891],[1004,1328,409],[566,568,340],[449,740,547],[515,1251,42],[1941,1942,969],[301,1636,23],[1302,1909,861],[208,242,691],[161,1616,183],[723,1343,703],[1783,1869,93],[38,1275,770],[1809,1998,888],[1563,1755,865],[965,1239,3],[858,1967,287],[1772,1986,825],[330,1195,496],[947,1032,291],[524,1325,715],[1811,1900,892],[1887,1989,423],[1543,1735,955],[1126,1795,238],[180,719,881],[1263,1392,118],[1683,1760,446],[1288,1605,666],[1344,1493,164],[1571,1899,675],[1204,1509,753],[521,678,920],[139,701,439],[359,527,484],[1388,1850,690],[1104,1562,786],[157,900,605],[750,1979,974],[1109,1669,472],[623,1371,844],[431,1041,452],[543,1935,420],[552,1603,127],[1223,1437,458],[1579,1896,520],[167,1254,652],[1139,1488,314],[897,969,681],[1632,1860,938],[405,925,207],[730,987,240],[1121,1144,341],[38,1464,192],[500,1744,434],[1290,1400,886],[416,844,568],[291,1331,894],[816,1397,961],[71,1133,329],[17,25,698],[618,1316,668],[1778,1852,284],[1911,1921,615],[1625,1794,291],[1280,1586,590],[47,303,543],[322,1235,814],[1806,1865,656],[1427,1660,462],[897,925,159],[1475,1688,841],[1129,1892,980],[1341,1661,121],[1510,1922,777],[76,128,578],[1306,1666,711],[1191,1996,126],[668,1782,472],[1445,1533,587],[970,1502,71],[761,1342,966],[927,1242,521],[584,633,354],[1081,1247,498],[521,1916,660],[1319,1848,801],[1158,1494,700],[130,927,596],[1963,1964,853],[1720,1860,753],[1217,1685,922],[730,828,113],[1265,1809,247],[1298,1727,297],[1658,1868,382],[1905,1943,430],[610,1288,635],[72,96,603],[122,710,668],[1800,1972,977],[373,1189,136],[1237,1469,594],[1797,1959,868],[224,1121,38],[1221,1457,653],[1444,1599,449],[44,1564,580],[233,1364,11],[1428,1792,426],[973,1933,443],[916,1284,762],[699,1483,817],[1330,1580,161],[1809,1991,903],[1570,1943,802],[1315,1933,572],[1228,1692,601],[1947,1995,816],[126,1362,817],[1356,1483,774],[766,1569,176],[469,1720,337],[1622,1626,185],[1043,1245,775],[825,1622,765],[1773,1857,409],[1667,1901,403],[1085,1785,242],[1239,1703,575],[406,418,371],[1559,1705,503],[152,538,3],[601,759,685],[1430,1724,486],[123,1678,916],[694,1363,700],[462,1406,879],[1239,1895,118],[418,1514,980],[1915,1992,158],[403,1824,793],[1222,1961,663],[1513,1984,386],[898,1298,717],[1722,1744,677],[861,1313,455],[211,1579,419],[667,1258,420],[414,603,23],[1420,1880,713],[726,1019,73],[1659,1750,67],[1004,1938,269],[1472,1516,718],[985,1297,161],[1895,1974,553],[820,1734,961],[1392,1914,224],[1039,1112,376],[972,1562,457],[395,613,972],[700,836,70],[1102,1751,254],[1551,1813,90],[984,1502,157],[571,1519,519],[402,985,997],[1434,1687,431],[882,1988,251],[745,1949,941],[1121,1971,679],[1397,1925,569],[1605,1793,235],[1285,1366,833],[1430,1861,471],[337,1598,241],[415,1074,940],[1228,1834,879],[1973,1995,978],[1409,1946,138],[1271,1585,945],[83,1425,94],[906,1735,706],[1946,1947,384],[322,1318,208],[870,1041,217],[78,1020,84],[1721,1801,504],[961,1122,603],[695,1930,331],[881,1585,295],[114,1843,573],[1402,1857,3],[1809,1867,64],[605,1082,977],[1200,1309,435],[805,1596,768],[635,1432,41],[650,852,315],[267,1587,362],[690,1048,676],[1972,1976,645],[1391,1848,196],[458,1754,482],[174,1272,104],[1190,1363,948],[435,502,32],[719,1434,201],[660,865,617],[307,401,696],[1249,1659,708],[1781,1783,64],[1503,1851,193],[1565,1833,736],[1985,1986,324],[932,1025,730],[58,813,60],[767,1261,862],[1199,1641,121],[163,305,326],[538,1683,171],[1709,1979,552],[443,1774,570],[571,1410,71],[1893,1973,410],[194,463,139],[1143,1160,294],[440,1752,694],[852,1904,49],[612,1914,821],[1786,1932,141],[824,1168,495],[1639,1775,37],[1376,1692,845],[1149,1868,627],[503,542,969],[1218,1771,408],[450,870,681],[446,1434,933],[1939,1970,220],[278,1811,311],[1457,1754,294],[1476,1513,348],[1488,1781,151],[691,894,87],[1353,1882,82],[862,1976,170],[960,1294,55],[1403,1517,658],[227,230,541],[1327,1390,558],[153,249,641],[640,1856,133],[1914,1932,406],[1193,1284,747],[1538,1934,999],[608,1489,329],[747,1505,708],[1117,1513,242],[1348,1453,334],[928,1097,142],[491,1405,45],[1915,1930,550],[93,1013,940],[1228,1487,847],[557,919,592],[211,400,329],[1895,1942,145],[968,1937,684],[1182,1312,895],[1477,1561,600],[834,1724,681],[1849,1929,637],[184,1619,255],[1924,1947,428],[1612,1943,630],[1182,1268,317],[395,1107,800],[1203,1505,754],[1543,1853,606],[1206,1263,821],[273,1389,575],[1219,1634,373],[1203,1350,109],[1319,1798,787],[1111,1323,155],[1793,1834,514],[506,1526,729],[256,1588,848],[1836,1844,285],[1884,1900,674],[1155,2000,816],[1508,1933,375],[599,1439,726],[685,1990,491],[1864,1934,712],[504,1359,711],[1563,1980,294],[1209,1864,68],[835,1890,915],[657,1744,718],[1780,1930,290],[88,1276,377],[1055,1515,337],[235,1607,424],[199,542,536],[1550,1892,268],[117,1949,520],[799,1922,373],[1601,1628,104],[1261,1713,998],[1060,1778,733],[616,790,552],[683,1964,678],[1942,1953,433],[1949,1986,530],[1531,1933,135],[1060,1728,255],[396,1244,186],[902,1696,24],[313,621,125],[533,780,344],[1479,1975,944],[1746,1862,524],[555,570,43],[1098,1268,702],[139,361,253],[613,894,380],[596,706,674],[806,1708,72],[1074,1149,370],[779,1121,548],[324,907,905],[839,989,370],[1704,1839,692],[40,510,739],[1800,1945,605],[1712,1890,990],[557,1985,772],[1008,1485,228],[621,757,390],[816,1104,567],[1097,1293,16],[322,1152,267],[24,93,302],[597,1407,833],[1269,1544,926],[401,1561,318],[1914,1977,692],[1969,1976,434],[660,1060,429],[1297,1457,886],[1782,1803,862],[556,1470,62],[771,1472,464],[445,840,619],[188,677,478],[120,1103,809],[363,576,125],[905,1706,697],[409,1202,374],[1784,1906,996],[1165,1268,708],[1835,1914,791],[1163,1515,53],[1708,1755,519],[56,271,843],[1493,1542,216],[277,1285,124],[167,1143,725],[1183,1939,452],[337,930,369],[1976,1989,442],[1405,1747,298],[1740,1827,382],[935,1837,298],[933,1448,43],[1664,1765,853],[96,1593,369],[1353,1980,162],[1016,1036,654],[1418,1603,999],[662,1518,358],[1839,1905,740],[103,1807,193],[1857,1992,674],[346,411,642],[332,762,2],[737,1055,287],[1834,1932,500],[1098,1989,462],[1181,1671,770],[1596,1833,299],[91,1346,442],[179,397,240],[14,1754,747],[473,1454,63],[824,1347,340],[1474,1707,278],[12,858,173],[1131,1690,481],[873,1069,198],[474,514,390],[954,1266,397],[1897,1917,870],[1288,1344,435],[417,1574,314],[1308,1716,820],[259,707,229],[851,1428,271],[1690,1917,228],[1926,1936,464],[331,1680,240],[1554,1687,627],[1972,1979,569],[257,969,332],[117,917,922],[255,412,419],[1597,1607,349],[1105,1983,929],[1399,1699,579],[872,1244,733],[994,1352,562],[1309,1776,197],[821,1364,774],[1823,1976,802],[943,1845,267],[616,1181,788],[1439,1845,349],[898,1655,352],[1264,1610,476],[1044,1824,682],[240,1217,610],[932,1998,408],[216,1752,995],[1826,1982,728],[915,1118,305],[1099,1269,497],[503,1054,813],[903,1894,965],[1301,1670,775],[311,1390,717],[1532,1681,353],[516,1410,114],[1595,1704,870],[1322,1896,70],[617,1868,10],[1494,1558,443],[1003,1484,372],[1577,1689,161],[1694,1971,480],[214,653,505],[568,1926,355],[1079,1140,850],[951,1485,253],[1472,1954,947],[745,1150,214],[1246,1367,167],[795,1176,605],[1962,1971,344],[651,1804,700],[219,1923,879],[465,1449,815],[1106,1494,47],[1901,1930,285],[1107,1711,193],[1139,1685,673],[358,1534,957],[44,975,234],[623,1804,94],[1749,1907,364],[1875,1915,427],[366,1000,818],[1128,1950,407],[44,1809,831],[524,691,786],[162,980,713],[1319,1998,285],[1822,1971,141],[494,1901,939],[307,310,325],[1899,1987,336],[1926,1952,414],[1133,1855,290],[188,1083,233],[541,1233,833],[680,931,659],[1709,1737,98],[626,1885,777],[256,1362,365],[366,1826,190],[1936,1977,751],[1973,1982,308],[1365,1482,624],[212,841,595],[945,1845,11],[936,1376,547],[133,1167,975],[1983,1996,496],[1287,1303,960],[266,576,624],[521,1427,638],[1820,1974,463],[668,677,671],[443,562,858],[1782,1876,264],[1297,1480,577],[1077,1279,209],[1227,1909,557],[875,1788,166],[907,1474,683],[1964,1975,833],[1393,1729,452],[744,1443,74],[771,1077,877],[487,958,368],[1512,1806,943],[1313,1956,59],[396,708,712],[1099,1219,950],[1077,1801,929],[609,1321,356],[1794,1993,740],[846,1519,679],[1922,1947,235],[1383,1426,153],[346,596,80],[445,1335,511],[1992,1996,639],[83,773,987],[1244,1688,105],[606,1686,397],[723,1307,850],[564,831,584],[1244,1315,470],[1659,1931,433],[322,1204,696],[767,1111,633],[1499,1738,984],[1611,1724,185],[1209,1728,732],[645,1922,280],[1559,1617,472],[239,1544,951],[297,732,354],[893,1277,505],[528,1053,561],[243,535,879],[1760,1801,43],[1172,1682,902],[1010,1685,340],[232,1447,149],[1943,1993,481],[815,1948,949],[1880,1947,425],[258,1686,901],[955,1337,518],[1138,1637,732],[5,1820,551],[1119,1301,531],[414,617,456],[1467,1624,253],[564,1583,251],[455,1202,255],[1808,1943,819],[67,1606,628],[1168,1677,213],[849,903,594],[251,1302,581],[305,1190,997],[1851,1978,881],[1701,1985,940],[1003,1564,101],[1327,1507,604],[515,1316,501],[494,725,875],[318,1270,328],[1808,1988,182],[872,1372,75],[1194,2000,867],[202,367,269],[1836,1932,93],[249,316,807],[275,893,477],[1245,1881,413],[1058,1108,802],[1508,1898,173],[1925,1939,738],[3,983,9],[1836,1848,575],[1126,1690,457],[265,695,638],[32,943,67],[483,1248,887],[1839,1952,676],[119,925,357],[264,858,839],[202,1275,491],[1712,1878,765],[363,1648,871],[1973,1979,764],[580,1213,186],[5,1525,965],[1717,1964,51],[218,232,840],[1597,1844,887],[1089,1511,955],[1355,1679,843],[1246,1465,57],[717,1496,569],[351,1924,804],[627,1649,758],[934,1726,94],[1258,1418,574],[1719,1813,335],[1407,1724,81],[1024,1345,869],[210,386,730],[1375,1450,6],[666,1435,357],[85,835,869],[464,1322,318],[1567,1999,412],[877,1541,466],[1106,1249,860],[1350,1559,174],[1130,1915,369],[839,1295,835],[906,1749,442],[1671,1879,902],[1206,1405,338],[100,891,1],[1434,1699,488],[603,1675,547],[634,1500,45],[1476,1788,770],[394,1223,210],[1020,1512,995],[1312,1544,459],[256,1291,404],[1885,1937,967],[1943,1950,734],[1834,1947,250],[1272,1910,307],[363,2000,530],[1201,1716,629],[931,1029,215],[373,1537,296],[1981,1986,848],[1921,1970,545],[1832,1847,939],[206,795,907],[1072,1924,956],[327,1290,471],[375,826,337],[475,1347,510],[387,1256,76],[425,1035,93],[1057,1539,250],[150,1282,953],[1185,1786,845],[1199,1432,749],[690,1194,388],[96,477,400],[740,1877,787],[1026,1071,660],[922,1775,687],[1470,1543,975],[1527,1790,64],[664,1269,450],[519,681,898],[966,1833,197],[563,583,818],[1937,1998,418],[1094,1607,504],[379,700,660],[466,1405,917],[1522,1868,871],[1924,1978,107],[1376,1996,106],[486,1553,209],[1198,1734,141],[748,1913,452],[1021,1683,438],[116,1083,355],[1186,1964,816],[1662,1784,882],[793,1385,977],[179,842,899],[402,646,6],[1885,1944,419],[526,1990,978],[1346,1453,180],[1413,1468,387],[355,1134,971],[570,1469,52],[158,193,45],[1768,1826,503],[970,1176,956],[1113,1121,27],[444,1224,111],[1781,1927,59],[1505,1625,679],[1201,1614,488],[914,1419,585],[93,520,399],[399,845,505],[794,1378,372],[274,726,936],[869,1525,225],[425,1277,878],[400,660,130],[248,575,105],[1896,1933,144],[1497,1730,225],[1077,1800,512],[224,1879,571],[563,692,159],[1147,1157,190],[1698,1877,389],[1647,1824,599],[1741,1854,265],[329,1671,866],[961,1772,821],[1837,1857,807],[435,920,179],[131,1667,13],[48,762,982],[737,1468,50],[978,1363,403],[1858,1981,119],[1700,1925,465],[886,1589,94],[333,1338,117],[1920,1923,371],[1298,1564,597],[1356,1717,998],[917,1668,450],[1857,1998,5],[1731,1912,395],[1148,1444,607],[449,1372,631],[268,1466,422],[1521,1904,664],[168,446,381],[1140,1660,89],[1503,1622,761],[193,1840,118],[1962,1993,91],[1248,1645,171],[550,1781,309],[195,503,132],[739,1617,542],[1423,1529,277],[1099,1874,362],[1128,1567,367],[1114,1343,877],[434,1293,4],[1234,1845,790],[1670,1702,797],[1858,1916,37],[203,855,646],[686,865,218],[1648,1854,911],[1716,1903,97],[1435,1770,500],[1904,1957,377],[472,1537,65],[553,983,29],[335,1029,523],[1893,1905,136],[667,1192,426],[1151,1386,217],[1927,1967,604],[1898,1905,931],[1076,1491,977],[812,1719,349],[66,1075,502],[1499,1652,603],[439,1471,379],[1180,1655,870],[425,521,949],[487,1236,680],[441,1646,183],[1932,1974,788],[870,1110,170],[549,1635,545],[693,1721,156],[1986,1992,121],[1119,1296,530],[1711,1722,286],[523,875,574],[843,1581,891],[179,1027,663],[890,1595,675],[1399,1903,909],[1578,1847,986],[1411,1876,959],[1276,1310,832],[1551,1788,844],[1991,1996,354],[425,1303,826],[1419,1831,294],[743,1861,793],[1751,1856,975],[171,1515,432],[261,1931,561],[337,949,223],[56,1100,344],[1789,1976,707],[1830,1887,849],[858,1397,695],[1167,1826,398],[1344,1600,880],[361,1001,768],[1306,1422,748],[1208,1298,189],[946,1822,569],[938,1137,995],[373,1084,628],[306,1444,105],[1885,1956,784],[1923,1924,698],[360,1722,839],[1267,1860,98],[993,1402,569],[1927,1967,209],[1637,1844,301],[2,94,671],[1230,1381,953],[1494,1546,252],[1958,1959,63],[1949,1973,639],[1569,1893,478],[1321,1971,43],[1906,1982,473],[583,1242,612],[828,1960,637],[1822,1993,753],[1114,1896,661],[1766,1860,22],[609,1420,662],[1520,1712,114],[1382,1659,49],[1369,1476,65],[1320,1767,36],[1697,1745,886],[170,1572,443],[1529,1601,760],[1686,1709,904],[1011,1966,944],[375,1128,815],[1737,1884,668],[559,774,271],[825,916,843],[197,1789,139],[716,1839,704],[1735,1894,820],[961,1557,435],[311,1944,577],[517,1812,192],[65,498,827],[1087,1170,324],[500,1634,971],[863,1164,698],[821,876,983],[185,1504,227],[1294,1748,184],[199,1307,240],[70,1578,871],[541,809,592],[1766,1930,769],[469,1720,479],[1837,1869,899],[1189,1959,424],[455,1177,216],[1063,1546,818],[1319,1726,82],[744,1356,20],[1455,1758,447],[1377,1785,592],[94,1161,200],[1536,1698,45],[1784,1874,457],[422,1307,89],[177,591,918],[1366,1685,310],[1894,1972,313],[1799,1893,247],[1205,1212,394],[1566,1867,525],[942,1676,937],[694,1103,641],[1855,1936,143],[10,1776,793],[543,557,509],[801,1539,720],[1142,1261,113],[463,967,366],[1259,1506,494],[590,1499,995],[47,703,491]]");

    Solution solution;
    // auto ret0 = solution.maxTaxiEarnings(5, rides0);
    // auto ret1 = solution.maxTaxiEarnings(20, rides1);
    auto ret2 = solution.maxTaxiEarnings(2000, rides2);

    return 0;
}